<!-- templates/single_podcast.html -->
{% extends "base.html" %}

{% block content %}
<div class="mx-auto max-w-screen-lg px-4 py-12 sm:px-6 lg:px-8">
    <!-- Return to all podcasts button -->
    <div class="mb-8">
        <a href="/" class="inline-flex items-center text-sm text-black hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
            See all podcasts
        </a>
    </div>

    <!-- Single podcast card -->
    <div class="rounded-lg bg-black p-6 shadow-lg relative">
        <span class="absolute top-2 left-2 text-[8px] text-[#A4A5A6]">
            {{ podcast.created_at|timeago }}
        </span>

        <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-[#A4A5A6]">{{ podcast.title }}</h3>
            <div class="flex space-x-2">
                <button onclick="likePodcast({{ podcast.id }})" class="like-btn text-[#A4A5A6] hover:text-red-500" data-podcast-id="{{ podcast.id }}">
                    <span class="likes-count">{{ podcast.likes }}</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                </button>
                <button onclick="sharePodcast({{ podcast.id }})" class="share-btn text-[#A4A5A6] hover:text-blue-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                    </svg>
                </button>
            </div>
        </div>

        <p class="text-[#A4A5A6] mb-4">{{ podcast.description }}</p>

        <div class="audio-player">
            <audio class="plyr" controls>
                <source src="{{ podcast.audio_url }}" type="audio/mp3">
            </audio>
        </div>
    </div>

    <!-- Share Notification -->
    <div id="shareNotification" class="fixed bottom-4 right-4 bg-black text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-full opacity-0 transition-all duration-300">
        Link copied to clipboard!
    </div>
</div>

<!-- Social Media Embed Metadata -->
{% block head_extra %}
<meta property="og:title" content="{{ podcast.title }} - Poster Podcast">
<meta property="og:description" content="{{ podcast.description }}">
<meta property="og:type" content="music.song">
<meta property="og:audio" content="{{ podcast.audio_url }}">
<meta property="og:audio:type" content="audio/mpeg">
<meta property="twitter:card" content="player">
<meta property="twitter:player" content="{{ url_for('single_podcast', podcast_id=podcast.id, _external=True) }}">
<meta property="twitter:player:width" content="480">
<meta property="twitter:player:height" content="80">
{% endblock %}
{% endblock %}